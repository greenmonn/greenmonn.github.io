<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTTP header 중 content-type에 대해 알아보자</title>
  <link rel="stylesheet" href="/assets/css/bulma.min.css">
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="greenmonn.github.io" />
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>HTTP header 중 content-type에 대해 알아보자 | greenmonn.github.io</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="HTTP header 중 content-type에 대해 알아보자" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Content-Type entity header is used to indicate the media type of the resource." />
<meta property="og:description" content="The Content-Type entity header is used to indicate the media type of the resource." />
<link rel="canonical" href="http://localhost:4000/2018/11/24/content-type.html" />
<meta property="og:url" content="http://localhost:4000/2018/11/24/content-type.html" />
<meta property="og:site_name" content="greenmonn.github.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-24T00:00:00+09:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2018/11/24/content-type.html","headline":"HTTP header 중 content-type에 대해 알아보자","dateModified":"2018-11-24T00:00:00+09:00","datePublished":"2018-11-24T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/11/24/content-type.html"},"description":"The Content-Type entity header is used to indicate the media type of the resource.","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
  <div class="wrap">
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item navbar-title" href="/">
        <span class="greenmon">Greenmon</span>.xyz
      </a>

      <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarMenu" class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        
        <a class="navbar-item" href="/" >
          Home
        </a>
        
        <a class="navbar-item" href="/about.html" >
          About
        </a>
        
        <a class="navbar-item" href="/blog.html" >
          Blog
        </a>
        
      </div>
    </div>
  </nav>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {

    // Get all "navbar-burger" elements
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {

      // Add a click event on each of them
      $navbarBurgers.forEach(el => {
        el.addEventListener('click', () => {

          // Get the target from the "data-target" attribute
          const target = el.dataset.target;
          const $target = document.getElementById(target);

          // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');

        });
      });
    }

  });
</script>
  <section>
    <div class="wrap">
      <h1>HTTP header 중 content-type에 대해 알아보자</h1>
<p>2018.11.24</p>

<p>The <code class="highlighter-rouge">Content-Type</code> entity header is used to indicate the <strong>media type</strong> of the resource.</p>

<h2 id="prevent-mime-sniffing">Prevent MIME sniffing</h2>
<p>Browsers will do <em>MIME sniffing</em> in some cases and will not necessarily follow the value of this header; to prevent this behavior, the header <code class="highlighter-rouge">X-Content-Type-Options</code> can be set to <code class="highlighter-rouge">nosniff</code>.</p>

<blockquote>
  <p>MIME sniffing: Content sniffing, also known as media type sniffing or MIME sniffing, is the practice of inspecting the content of a byte stream to attempt to deduce the file format of the data within it.</p>
</blockquote>

<h2 id="syntax">Syntax</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Content-Type: text/html; charset=utf-8
Content-Type: multipart/form-data; boundary=something
</code></pre></div></div>

<h2 id="directives">Directives</h2>
<h3 id="media-type">media-type</h3>
<p>The <em>MIME type</em> of the resource of the data</p>

<blockquote>
  <p>MIME type: Multipurpose Internet Mail Extensions (MIME) type is a standard that indicates the nature and format of a document, file, or assortment of bytes.</p>
</blockquote>

<h3 id="charset">charset</h3>
<p>The character encoding standard</p>

<h3 id="boundary">boundary</h3>
<p>For multipart entities the <code class="highlighter-rouge">boundary</code> directive is required, which consists of 1 to 70 characters from a set of characters known to be very robust through email gateways, and not ending with white space. It is used to encapsulate the boundaries of the multiple parts of the message. Often the header boundary is prepended by two dashes(–) in the body and the final boundary also have a two dashes appended to it.</p>

<h2 id="content-type-on-http-post-method">Content-Type on HTTP POST method</h2>
<ul>
  <li>
    <p><code class="highlighter-rouge">application/x-www-form-urlencoded</code>: Encoded to key-value tuple. (splitted by ‘&amp;’, connected by ‘=’) Non-alphabet symbol is percent-encoded. So <strong>this content type is not suitable to binary data</strong>.</p>
  </li>
  <li><code class="highlighter-rouge">application/form-data</code>: can be used for binary data.</li>
  <li><code class="highlighter-rouge">text/plain</code></li>
</ul>

<h2 id="examples">Examples</h2>
<h3 id="in-html-forms-enctype">in HTML forms: enctype</h3>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/"</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">enctype=</span><span class="s">"multipart/form-data"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">value=</span><span class="s">"some text"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"file"</span> <span class="na">name=</span><span class="s">"myFile"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>

<h3 id="parsing-multipartform-data-in-expressjs">Parsing <code class="highlighter-rouge">multipart/form-data</code> in express.js</h3>

<p>Use <code class="highlighter-rouge">multer</code> library to parse <code class="highlighter-rouge">multipart/form-data</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">multer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'multuer'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">upload</span> <span class="o">=</span> <span class="nx">multer</span><span class="p">({</span> <span class="na">storage</span><span class="p">:</span> <span class="nx">multer</span><span class="p">.</span><span class="nx">memoryStorage</span><span class="p">()</span> <span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/api/image'</span><span class="p">,</span> <span class="nx">upload</span><span class="p">.</span><span class="nx">single</span><span class="p">(</span><span class="s1">'cell'</span><span class="p">),</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">file</span><span class="p">)</span> <span class="c1">// payload is stored in `req.file.buffer`</span>
<span class="p">});</span>
</code></pre></div></div>

<ul>
  <li>See also: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type</li>
</ul>

    </div>
  </section>
</body>

</html>